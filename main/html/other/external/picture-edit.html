<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<meta name="renderer" content="webkit|ie-comp|ie-stand">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
<!--[if lt IE 9]>
<script type="text/javascript" src="js/html5.js"></script>
<script type="text/javascript" src="js/respond.min.js"></script>
<script type="text/javascript" src="js/PIE_IE678.js"></script>
<![endif]-->
<link href="assets/css/bootstrap.min.css" rel="stylesheet" />
<link rel="stylesheet" href="css/style.css"/>
<link href="assets/css/codemirror.css" rel="stylesheet">
<link rel="stylesheet" href="assets/css/ace.min.css" />
      <link rel="stylesheet" href="Widget/zTree/css/zTreeStyle/zTreeStyle.css" type="text/css">
<link rel="stylesheet" href="assets/css/font-awesome.min.css" />
<!--[if IE 7]>
		  <link rel="stylesheet" href="assets/css/font-awesome-ie7.min.css" />
		<![endif]-->
<link href="Widget/icheck/icheck.css" rel="stylesheet" type="text/css" />
<link href="Widget/webuploader/0.1.5/webuploader.css" rel="stylesheet" type="text/css" />
<style type="text/css">
	.file-list {
		height: 125px;
		display: none;
		list-style-type: none;
	}

	.file-list img {
		max-width: 70px;
		vertical-align: middle;
	}

	.file-list .file-item {
		margin-bottom: 10px;
		float: left;
		margin-left: 20px;
	}


	.file-list .file-item .file-del {
		display: block;
		margin-left: 20px;
		margin-top: 5px;
		cursor: pointer;
	}
</style>
<title>新增图片</title>
</head>
<body>
   <div class="page_right_style">
   <div class="type_title">添加商品</div>
	<form method="post" class="form form-horizontal" id="form-article-add">
		<div class="clearfix cl">
         <label class="form-label col-2"><span class="c-red">*</span>商品标题：</label>
		 <div class="formControls col-10"><input type="text" class="input-text" value=""  placeholder="" id="name1" name=""></div>
		</div>
		<div class=" clearfix cl">
         <label class="form-label col-2">关键词：</label>
	     <div class="formControls col-10"><input type="text" class="input-text" value=""  placeholder="用空格隔开  例如：很好 很棒 很强" id="keyword" name=""></div>

        </div>

        <div class="clearfix cl">
            <label class="form-label col-2">封面图片：</label><div class="formControls col-10">  <input type="file" id="fengmian" placeholder="最好上传3张" multiple></div>
            <div style="height: 150px">
            <ul id="ul1">


            </ul>
            </div>
            <!--<input style="cursor: pointer;margin-left: 150px;" type="button" id="upload2" value="上传">-->
        </div>

		<div class=" clearfix cl">

			<div class="Add_p_s">
             <label class="form-label col-2">产&nbsp;&nbsp;&nbsp;&nbsp;地：</label>
			 <div class="formControls col-2"><input type="text" class="input-text" value="" placeholder="" id="chandi" name=""></div>
			</div>
            <div class="Add_p_s">
             <label class="form-label col-2">颜&nbsp;&nbsp;&nbsp;&nbsp;色：</label>
			 <div class="formControls col-2"><input type="text" class="input-text" value="" placeholder="" id="color" name=""></div>
			</div>
            <div class="Add_p_s">
             <label class="form-label col-2">类&nbsp;&nbsp;&nbsp;&nbsp;型：</label>
			 <div class="formControls col-2"><span class="select-box">
				<select class="select" id="kind">
					<option>请选择</option>
				</select>
				</span></div>
			</div>
             <div class="Add_p_s">
             <label class="form-label col-2">产品重量：</label>
			 <div class="formControls col-2"><input type="text" class="input-text" value="" placeholder="" id="zhongliang" name="" >kg</div>
			</div>
			<div class="Add_p_s">
			<label class="form-label col-2">种&nbsp;&nbsp;&nbsp;&nbsp;类：</label>
			<div class="formControls col-2"><input type="text" class="input-text" value="" placeholder="" id="type" name="" ></div>
		</div>
            <div class="Add_p_s">
             <label class="form-label col-2">价&nbsp;&nbsp;&nbsp;&nbsp;格：</label>
			 <div class="formControls col-2"><input type="text" class="input-text" value="" placeholder="" id="price" name="" >元</div>
			</div>
            <div class="Add_p_s">
             <label class="form-label col-2">是否用电：</label>
			 <div class="formControls col-2">
                 <span class="select-box">
				<select class="select" id="shifouyongdian">
					<option>请选择</option>
					<option value="是">是</option>
					<option value="否">否</option>
				</select>
				</span>
             </div>

			</div>


			<div class="Add_p_s">
				<label class="form-label col-2">水质要求：</label>
				<div class="formControls col-2"><input type="text" class="input-text" value="" placeholder="" id="shuizhi" name="" ></div>
			</div>

			<div class="Add_p_s">
				<label class="form-label col-2">温度范围：</label>
				<div class="formControls col-2"><input type="text" class="input-text" value="" placeholder="" id="wendufanwei" name="" ></div>
			</div>
			<div class="Add_p_s">
			    <label class="form-label col-2">水&nbsp;&nbsp;&nbsp;&nbsp;压：</label>
			    <div class="formControls col-2"><input type="text" class="input-text" value="" placeholder="" id="shuiya" name="" ></div>
		    </div>

            <div class="Add_p_s">
                <label class="form-label col-2">尺寸：</label>
                <div class="formControls col-2"><input type="text" class="input-text" value="" placeholder="" id="chicun" name="" ></div>
            </div>
            <div class="Add_p_s">
                <label class="form-label col-2">RO规模：</label>
                <div class="formControls col-2"><input type="text" class="input-text" value="" placeholder="" id="ro" name="" ></div>
            </div>
            <div class="Add_p_s">
                <label class="form-label col-2">出水温度：</label>
                <div class="formControls col-2"><input type="text" class="input-text" value="" placeholder="" id="chushuiwendu" name="" ></div>
            </div>
            <div class="Add_p_s">
                <label class="form-label col-2">有无压力桶：</label>
                <div class="formControls col-2"><span class="select-box">
				<select class="select" id="yalitong">
					<option>请选择</option>
					<option value="有">有</option>
					<option value="无">无</option>
				</select>
				</span></div>
            </div>

            <div class="Add_p_s">
                <label class="form-label col-2">回水率：</label>
                <div class="formControls col-2"><input type="text" class="input-text" value="" placeholder="" id="huishuilv" name="" ></div>
            </div>
            <div class="Add_p_s">
                <label class="form-label col-2">提示寿命：</label>
                <div class="formControls col-2">
                    <span class="select-box">
				<select class="select" id="tishishouming">
					<option>请选择</option>
					<option value="是">是</option>
					<option value="否">否</option>
				</select>
				</span>
                </div>
            </div>

            <div class="Add_p_s">
                <label class="form-label col-2">容量：</label>
                <div class="formControls col-2"><input type="text" class="input-text" value="" placeholder="" id="rongliang" name="" ></div>
            </div>

            <div class="Add_p_s">
                <label class="form-label col-2">功率：</label>
                <div class="formControls col-2"><input type="text" class="input-text" value="" placeholder="" id="gonglv" name="" >W</div>
            </div>
            <div class="Add_p_s">
                <label class="form-label col-2">过滤原理：</label>
                <div class="formControls col-2"><input type="text" class="input-text" value="" placeholder="" id="guolvyuanli" name="" >W</div>
            </div>

            <div class="Add_p_s">
                <label class="form-label col-2">库存：</label>
                <div class="formControls col-2"><input type="text" class="input-text" value="" placeholder="" id="count" name="" >件</div>
            </div>
		</div>

		<!--<div class="clearfix cl">-->
			<!--<label class="form-label col-2">关键词：</label>-->
			<!--<div class="formControls col-10">-->
				<!--<input type="text" class="input-text" value="" placeholder="" id="" name="">-->
			<!--</div>-->
		<!--</div>-->
		<!--<div class="clearfix cl">-->
			<!--<label class="form-label col-2">内容摘要：</label>-->
			<!--<div class="formControls col-10">-->
				<!--<textarea name="" cols="" rows="" class="textarea"  placeholder="说点什么...最少输入10个字符" datatype="*10-100" dragonfly="true" nullmsg="备注不能为空！" onKeyUp="textarealength(this,200)"></textarea>-->
				<!--<p class="textarea-numberbar"><em class="textarea-length">0</em>/200</p>-->
			<!--</div>-->
		<!--</div>-->

		<div class="clearfix cl">
            <label class="form-label col-2">详情图片：</label>
            <div class="formControls col-10">
                <input type="text" name="" id="name" hidden value="你去死吧"/>
                <input type="file" name="" id="choose-file" multiple="multiple"/>
                <div style="width: 1120px;height: 250px">
                    <ul id="ul2">


                    </ul>
                    <!--<button style="cursor: pointer;margin-left: 150px;" href="javascript:;" type="button" id="upload1">上传</button>-->
                </div>
            </div>
		</div>




		<!--<div class="clearfix cl">-->
         <!--<label class="form-label col-2">详细内容：</label>-->


			<!--<div class="formControls col-10">-->
				<!--<script id="editor" type="text/plain" style="width:100%;height:400px;"></script>-->
             <!--</div>-->
        <!--</div>-->
        <!--<div class="clearfix cl">-->
         <!--<label class="form-label col-2">允许评论：</label>-->
			<!--<div class="formControls col-2 skin-minimal">-->
			 <!--<div class="check-box" style=" margin-top:9px"><input type="checkbox" id="checkbox-1"><label for="checkbox-1">&nbsp;</label></div>-->
             <!--</div>-->
        <!--</div>-->
		<div class="clearfix cl">
			<div class="Button_operation">
				<button onclick="article_save_submit()" class="btn btn-primary radius" type="button"><i class="icon-save "></i>保存</button>
				<button onClick="layer_close();" class="btn btn-default radius" type="button">&nbsp;&nbsp;取消&nbsp;&nbsp;</button>
			</div>
		</div>
	</form>
    </div>
</div>



<script src="js/jquery-1.9.1.min.js"></script>

<script src="assets/js/bootstrap.min.js"></script>
<script src="assets/js/typeahead-bs2.min.js"></script>
<script src="assets/layer/layer.js" type="text/javascript" ></script>
<script src="assets/laydate/laydate.js" type="text/javascript"></script>
<script type="text/javascript" src="Widget/My97DatePicker/WdatePicker.js"></script>
<script type="text/javascript" src="Widget/icheck/jquery.icheck.min.js"></script>
<script type="text/javascript" src="Widget/zTree/js/jquery.ztree.all-3.5.min.js"></script>
<script type="text/javascript" src="Widget/Validform/5.3.2/Validform.min.js"></script>
<script type="text/javascript" src="Widget/webuploader/0.1.5/webuploader.min.js"></script>
<script type="text/javascript" src="Widget/ueditor/1.4.3/ueditor.config.js"></script>
<script type="text/javascript" src="Widget/ueditor/1.4.3/ueditor.all.min.js"> </script>
<script type="text/javascript" src="Widget/ueditor/1.4.3/lang/zh-cn/zh-cn.js"></script>
<script src="js/lrtk.js" type="text/javascript" ></script>
<script type="text/javascript" src="js/H-ui.js"></script>
<script type="text/javascript" src="js/H-ui.admin.js"></script>
   <script src="../../../../main/js/htmljs/public_main.js"></script>
   <script type="text/javascript" src="js/edit.js"></script>

<script>
$(function() {


        ////////////////////////////////////////////////图片上传//////////////////////////////////////////////
        //声明变量
        var $button = $('#upload1'),
            //选择文件按钮
            $file = $("#choose-file"),
            //回显的列表
            $list = $('.file-list'),
            //选择要上传的所有文件
            fileList = [];
        //当前选择上传的文件
        var curFile;
        // 选择按钮change事件，实例化fileReader,调它的readAsDataURL并把原生File对象传给它，
        // 监听它的onload事件，load完读取的结果就在它的result属性里了。它是一个base64格式的，可直接赋值给一个img的src.
        $file.on('change', function (e) {
            //上传过图片后再次上传时限值数量
            var numold = $('li [name=a]').length;
            if(numold >= 10){
                layer.alert('最多上传10张图片');
                return;
            }
            //限制单次批量上传的数量
            var num = e.target.files.length;
            var numall = numold + num;
            if(num >10 ){
                layer.alert('最多上传10张图片');
                return;
            }else if(numall > 10){
                layer.alert('最多上传10张图片');
                return;
            }
            //原生的文件对象，相当于$file.get(0).files;//files[0]为第一张图片的信息;
            curFile = this.files;
            //curFile = $file.get(0).files;
            //console.log(curFile);
            //将FileList对象变成数组
//            fileList = fileList.concat(Array.from(curFile));
//            //console.log(fileList);
//            for (var i = 0, len = curFile.length; i < len; i++) {
//                reviewFile(curFile[i])
//            }
//            $('.file-list').fadeIn(2500);
            if(fileList.length > 10){
                layer.alert('最多允许上传10张图片');
                return;
            } else {
                var formData = new FormData();
                for (var i = 0, len = this.files.length; i < len; i++) {
                    //console.log(fileList[i]);
                    formData.append('file', this.files[i]);
                }
                formData.append('name', name);
                // formData.append('catgory', catgory);
                // formData.append('price', price);
                // formData.append('desc', desc);
                // formData.append('stock', stock);
                // formData.append('status', status);
                //console.log(formData);
                $.ajax({
                    url: 'http://120.79.7.46/file/fileonload/onloads',
                    type: 'post',
                    data: formData,
                    dataType: 'json',
                    processData: false,
                    contentType: false,
                    success: function (data) {
                        for(var i=0;i<data.length;i++){
                            $("#ul2").append('<li style="border:solid red 0px; margin:5px 5px; width: 70px" class="file-item"><img style="margin-bottom: 5px" src="' + data[i]+ '" alt="" height="70" width="70px"><button type="button" value="" class="file-del" style="left: 30%;position: absolute;margin-bottom: 10px" onclick="del(this)">删除</button></li>').children(':last').hide().fadeIn(2500);
                            detUrl.push(data[i])
                        }
                        console.log(detUrl)
                    }
                })
            }
        })


        function reviewFile(file) {
            //实例化fileReader,
            var fd = new FileReader();
            //获取当前选择文件的类型
            var fileType = file.type;
            //调它的readAsDataURL并把原生File对象传给它，
            fd.readAsDataURL(file);//base64
            //监听它的onload事件，load完读取的结果就在它的result属性里了
            fd.onload = function () {
                if (/^image\/[jpeg|png|jpg|gif]/.test(fileType)) {
                    $("xt").append('<li name="a" style="border:solid red 0px; margin:5px 5px;" class="file-item"><img src="' + this.result + '" alt="" height="70"><span class="file-del">删除</span></li>').children(':last').hide().fadeIn(2500);
                } else {
                    $("xt").append('<li name="a" class="file-item"><span class="file-name">' + file.name + '</span><span class="file-del">删除</span></li>')
                }


            }
        }

        //点击删除按钮事件：
        $(".file-list").on('click', '.file-del', function () {
            var $parent = $(this).parent();
            console.log($parent);
            var index = $parent.index();
            fileList.splice(index, 1);
            $parent.fadeOut(850, function () {
                $parent.remove()
            });
            //$parent.remove()
        });
        //点击上传按钮事件：
        $button.on('click', function () {
            var name = $('#name').val();
            // var catgory = $('#catgory').val();
            // var price = $('#price').val();
            // var desc = $('#desc').val();
            // var stock = $('#stock').val();
            // var status = $("input[type='radio']:checked").val();
            // var reg = /^[1-9]\d*$/;
            // if (!(reg.test(stock))) {
            //     layer.alert('商品库存为整数!');
            //     return;
            // }
            if (name == '') {
                layer.alert('请输入商品名称');
                return;
            }
            // else if (status == null) {
            //     layer.alert('请输入商品显示状态');
            //     return;
            // }
            // else if (catgory == '') {
            //     layer.alert('请输入商品分类');
            //     return;
            // }
            // else if (price == '') {
            //     layer.alert('请输入商品价格');
            //     return;
            // }
            // else if (stock == '') {
            //     layer.alert('请输入商品库存');
            //     return;
            // }
            // else if (fileList.length == 0) {
            //     layer.alert('请选择商品图片');
            //     return;
            // }

        })





	$("#add_picture").fix({
		float : 'left',
		skin : 'green',
		durationTime :false,
		stylewidth:'220',
		spacingw:0,
		spacingh:260,
	});
});
$( document).ready(function(){
//初始化宽度、高度

   $(".widget-box").height($(window).height());
   $(".page_right_style").height($(window).height());
   $(".page_right_style").width($(window).width()-220);
  //当文档窗口发生改变时 触发
    $(window).resize(function(){

	 $(".widget-box").height($(window).height());
	 $(".page_right_style").height($(window).height());
	 $(".page_right_style").width($(window).width()-220);
	});
});
$(function(){
	var ue = UE.getEditor('editor');
});
/******树状图********/

</script>
</body>
</html>